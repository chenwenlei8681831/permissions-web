{"remainingRequest":"/Users/mac/Desktop/permissions-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/permissions-web/src/views/service/infoList.vue?vue&type=style&index=0&id=0eb8c1a0&scoped=true&lang=css&","dependencies":[{"path":"/Users/mac/Desktop/permissions-web/src/views/service/infoList.vue","mtime":1649764757597},{"path":"/Users/mac/Desktop/permissions-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/permissions-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/mac/Desktop/permissions-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/mac/Desktop/permissions-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/permissions-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.list_header li,\r\n.list_main ol li {\r\n  width: 16%;\r\n}\r\n",{"version":3,"sources":["infoList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgaA;AACA;AACA;AACA","file":"infoList.vue","sourceRoot":"src/views/service","sourcesContent":["<template>\r\n  <div class=\"views b_s mr_color01 h_bottom\">\r\n    <div class=\"bg_fff\">\r\n      <bot-header></bot-header>\r\n      <div class=\"views_100ch_1\">\r\n        <div class=\"w_100 header_item h_60px b_s pad_r_30 pad_l_30 flex row\">\r\n          <div class=\"w_25 b_s h_100 flex row\">\r\n            <span class=\"font12\">服务商名称：</span>\r\n            <el-input\r\n              size=\"mini\"\r\n              class=\"flex_1 inp\"\r\n              v-model=\"keyword\"\r\n              placeholder=\"请输入服务商名称\"\r\n              clearable\r\n            ></el-input>\r\n            <div class=\"clearfix\"></div>\r\n          </div>\r\n          <div class=\"w_25 flex row b_s h_100 mar_l_30\">\r\n            <span class=\"font12\">发布时间：</span>\r\n            <el-date-picker\r\n              class=\"flex_1\"\r\n              v-model=\"timer\"\r\n              size=\"mini\"\r\n              value-format=\"yyyy-MM-dd\"\r\n              type=\"daterange\"\r\n              range-separator=\"至\"\r\n              start-placeholder=\"开始日期\"\r\n              end-placeholder=\"结束日期\"\r\n            ></el-date-picker>\r\n            <div class=\"clearfix\"></div>\r\n          </div>\r\n          <div class=\"h_100 mar_l_30\">\r\n            <!-- <span\r\n              @click=\"sub(1)\"\r\n              class=\"f_l font14 pointer t_center header_set_btn header_set_btn01 border all_line co_fff\"\r\n              style=\"line-height:30px\"\r\n            >查询</span>-->\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"sub(1)\">查询</el-button>\r\n            <el-button size=\"mini\" @click=\"sub(2)\">重置</el-button>\r\n            <!-- <span\r\n              @click=\"sub(2)\"\r\n              class=\"mar_l_30 f_l font14 pointer t_center header_set_btn header_set_btn02 border all_line bg_fff\"\r\n              style=\"line-height:30px\"\r\n            >重置</span>-->\r\n            <div class=\"clearfix\"></div>\r\n          </div>\r\n          <div class=\"w_25 b_s h_100 mar_l_30\"></div>\r\n        </div>\r\n        <div v-show=\"userType==1\" class=\"w_100 header_item h_60px b_s font14 flex row\">\r\n          <!-- <span\r\n            @click=\"create\"\r\n            class=\"f_l search_btn search_btn01 3_btn b_s pad_r_20 pointer bg_blue co_fff\"\r\n          >创建</span>-->\r\n          <el-button icon=\"el-icon-plus\" type=\"primary\" size=\"mini\" @click=\"create\">创建</el-button>\r\n        </div>\r\n        <el-table\r\n          :data=\"list\"\r\n          stripe\r\n          style=\"width: 100%\"\r\n          height=\"544\"\r\n          :header-cell-style=\"{background:'#f5f5f5'}\"\r\n        >\r\n          <el-table-column prop=\"id\" label=\"ID\" min-width=\"80\">\r\n            <template v-slot=\"{row}\">{{row.id ? row.id :'--'}}</template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"name\" label=\"公司名称\" min-width=\"180\">\r\n            <template v-slot=\"{row}\">{{row.name ? row.name : '--'}}</template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"code\" label=\"信用代码\" min-width=\"180\">\r\n            <template v-slot=\"{row}\">{{row.code ? row.code :'--'}}</template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"legal\" label=\"法人代表人\" min-width=\"180\">\r\n            <template v-slot=\"{row}\">{{row.legal ? row.legal :'--'}}</template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"address\" label=\"地址\" min-width=\"180\">\r\n            <template v-slot=\"{row}\">{{row.address ? row.address :'--'}}</template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"created_at\" label=\"发布时间\" min-width=\"180\">\r\n            <template v-slot=\"{row}\">{{row.created_at ? row.created_at :'--'}}</template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" min-width=\"180\" fixed=\"right\">\r\n            <template v-slot=\"{row}\">\r\n              <el-button type=\"text\" @click=\"view(3,row)\">二维码</el-button>\r\n              <el-button type=\"text\" @click=\"view(1,row)\">查看</el-button>\r\n              <el-button\r\n                type=\"text\"\r\n                @click=\"$router.push('/home/service/serviceOne/serviceEdit/'+row.id)\"\r\n              >编辑</el-button>\r\n              <el-button size=\"mini\" type=\"text\" class=\"col01\" @click=\"view(2,row)\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <div class=\"page_footer b_s w_100 h_60px\">\r\n          <el-pagination\r\n            class=\"f_r\"\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"page\"\r\n            :page-sizes=\"[10, 20, 30, 40]\"\r\n            :page-size=\"count\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"total\"\r\n          ></el-pagination>\r\n          <div class=\"clearfix\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <el-dialog\r\n      title=\"上传合同模板\"\r\n      :show-close=\"false\"\r\n      :beforeClose=\"close_win\"\r\n      :visible.sync=\"ht_show_flag\"\r\n      :closeOnClickModal=\"false\"\r\n      width=\"500px\"\r\n      height=\"500px\"\r\n    >\r\n      <div class=\"content alert_gj\">\r\n        <div class=\"img_box f_l mar_l_30\">\r\n          <div class=\"img\">\r\n            <el-upload\r\n              class=\"upload-demo\"\r\n              drag\r\n              :action=\"up_imgurl\"\r\n              :limit=\"1\"\r\n              :headers=\"{token:token}\"\r\n              list-type=\"text\"\r\n              :on-preview=\"handlePictureCardPreview\"\r\n              :on-success=\"upload\"\r\n              :on-remove=\"deleteImg\"\r\n              :file-list=\"img_value\"\r\n            >\r\n              <i class=\"el-icon-upload\"></i>\r\n              <div class=\"el-upload__text\">\r\n                将文件拖到此处，或\r\n                <em>点击上传</em>\r\n              </div>\r\n            </el-upload>\r\n            <el-dialog title=\"模板文件预览\" append-to-body :visible.sync=\"dialogVisible\">\r\n              <pdf\r\n                v-if=\"ht_path\"\r\n                class=\"w_100 d_block\"\r\n                :src=\"ht_path\"\r\n                :page=\"pdfPage\"\r\n                @num-pages=\"pageCount = $event\"\r\n                @page-loaded=\"pdfPage = $event\"\r\n              ></pdf>\r\n              <div style=\"margin-top: 15px; text-align: right\">\r\n                <el-button type=\"primary\" size=\"small\" @click.stop=\"previousPage\">上一页</el-button>\r\n                <el-button class=\"mar_r_10\" type=\"primary\" size=\"small\" @click.stop=\"nextPage\">下一页</el-button>\r\n                <span class=\"mar_l_10\">当前第{{pdfPage}}页 / 共{{pageCount}}页</span>\r\n              </div>\r\n            </el-dialog>\r\n          </div>\r\n        </div>\r\n        <div class=\"flex\"></div>\r\n      </div>\r\n      <div style=\"height:20px;\"></div>\r\n      <span slot=\"footer\" class=\"w_100 dialog-footer mar_t_20 flex row j_end\" style=\"height:34px;\">\r\n        <el-button @click=\"ht_btnClikc(1)\">取 消</el-button>\r\n        <el-button @click=\"ht_btnClikc(2)\" type=\"primary\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!--二维码(图片)-->\r\n    <el-image-viewer v-if=\"showViewer\" :on-close=\"closeViewer\" :url-list=\"previewImages\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nvar THIS;\r\nimport botHeader from \"@/views/components/bot-header/bot-header\";\r\nimport CMapReaderFactory from \"vue-pdf-signature/src/CMapReaderFactory.js\";\r\nimport ElImageViewer from \"element-ui/packages/image/src/image-viewer\";\r\nimport pdf from \"vue-pdf-signature\";\r\nexport default {\r\n  components: {\r\n    botHeader,\r\n    ElImageViewer,\r\n    pdf\r\n  },\r\n  name: \"serviceList\",\r\n  data() {\r\n    return {\r\n      userType: 2,\r\n      id: \"\",\r\n      page: 1,\r\n      count: 10,\r\n      total: 0,\r\n      currentPage: 0,\r\n      list: [],\r\n      allFlag: false,\r\n      keyword: \"\",\r\n      timer: \"\",\r\n      //上传合同模板\r\n      ht_show_flag: false,\r\n      ht_path: \"\",\r\n      ht_path_up: \"\", //上传的路径\r\n      img_value: [],\r\n      up_imgurl: \"\",\r\n      dialogVisible: false,\r\n      token: window.localStorage.flexible_manage_token,\r\n      pdfPage: 1,\r\n      pageCount: 0,\r\n      showViewer: false,\r\n      previewImages: []\r\n    };\r\n  },\r\n  methods: {\r\n    view(type, item) {\r\n      if (type == 1) {\r\n        THIS.$router.push(\"/home/service/serviceOne/serviceDetail/\" + item.id);\r\n      } else if (type == 2) {\r\n        THIS.$confirm(\"确定删除吗?\", \"提示\", {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\"\r\n        })\r\n          .then(() => {\r\n            THIS.deleteFunc(item.id);\r\n          })\r\n          .catch(() => {});\r\n      } else if (type == 3) {\r\n        if (item.qr_code) {\r\n          THIS.showViewer = true;\r\n          THIS.previewImages = [item.qr_code];\r\n        } else {\r\n          THIS.$message({\r\n            type: \"error\",\r\n            message: \"二维码不存在!\",\r\n            dangerouslyUseHTMLString: true\r\n          });\r\n        }\r\n      }\r\n    },\r\n\r\n    deleteFunc(id) {\r\n      var data = sign({\r\n        id: id\r\n      });\r\n      vue_Post(THIS, \"/platform/del\", data, callback, 1, 1, 1, 1);\r\n      function callback(msg) {\r\n        THIS.getList();\r\n        THIS.$message({\r\n          type: \"success\",\r\n          message: \"删除成功!\",\r\n          dangerouslyUseHTMLString: true\r\n        });\r\n      }\r\n    },\r\n\r\n    sub(type) {\r\n      THIS.page = 1;\r\n      if (type == 2) {\r\n        THIS.keyword = \"\";\r\n        THIS.timer = \"\";\r\n      }\r\n      THIS.getList();\r\n    },\r\n\r\n    getList() {\r\n      var date_start = \"\";\r\n      var date_end = \"\";\r\n      if (THIS.timer) {\r\n        date_start = THIS.timer[0];\r\n        date_end = THIS.timer[1];\r\n      }\r\n      var data = sign({\r\n        page: THIS.page,\r\n        size: THIS.count,\r\n        name: THIS.keyword,\r\n        date_start: date_start,\r\n        date_end: date_end\r\n      });\r\n      vue_Post(THIS, \"/platform/list\", data, callback, 1, 1, 1, 1);\r\n      function callback(msg) {\r\n        THIS.total = msg.count;\r\n        THIS.list = msg.list;\r\n      }\r\n    },\r\n\r\n    handleCurrentChange(val) {\r\n      THIS.page = val;\r\n      THIS.getList();\r\n    },\r\n\r\n    handleSizeChange(val) {\r\n      THIS.count = val;\r\n      THIS.page = 1;\r\n      THIS.getList();\r\n    },\r\n\r\n    //上传合同模板\r\n    close_win() {\r\n      THIS.ht_show_flag = false;\r\n      THIS.ht_path = \"\";\r\n      THIS.img_value = [];\r\n    },\r\n\r\n    up_load_ht(item) {\r\n      THIS.ht_show_flag = true;\r\n      THIS.id = item.id;\r\n      if (item.contract) {\r\n        THIS.ht_path = item.contract;\r\n        THIS.ht_path = THIS.ht_path.replace(\"http:\", \"https:\");\r\n        THIS.ht_path_up = THIS.ht_path;\r\n        THIS.ht_path = pdf.createLoadingTask({\r\n          url: THIS.ht_path,\r\n          CMapReaderFactory,\r\n          cMapPacked: true\r\n        });\r\n        THIS.img_value = item.contract\r\n          ? [{ url: item.contract, name: \"合同模板\" }]\r\n          : [];\r\n      }\r\n    },\r\n\r\n    upload(event, file, fileList) {\r\n      if (event.code == 200) {\r\n        THIS.ht_path = event.data.path[0];\r\n        THIS.ht_path = THIS.ht_path.replace(\"http:\", \"https:\");\r\n        THIS.ht_path_up = THIS.ht_path;\r\n      } else if (event.code == \"-999\") {\r\n        //layout(THIS);\r\n      } else {\r\n        THIS.$message({\r\n          type: \"error\",\r\n          message: event.msg,\r\n          dangerouslyUseHTMLString: true\r\n        });\r\n      }\r\n    },\r\n\r\n    deleteImg(file, fileList) {\r\n      THIS.img_value = [];\r\n      THIS.ht_path = \"\";\r\n    },\r\n\r\n    handlePictureCardPreview(file) {\r\n      THIS.dialogImageUrl = file.url;\r\n      THIS.dialogVisible = true;\r\n    },\r\n\r\n    ht_btnClikc(type) {\r\n      if (type == 1) {\r\n        THIS.ht_show_flag = false;\r\n        THIS.img_value = [];\r\n        THIS.ht_path = \"\";\r\n      } else if (type == 2) {\r\n        if (!THIS.ht_path_up) {\r\n          THIS.$message({\r\n            type: \"error\",\r\n            message: \"合同模板必传!\",\r\n            dangerouslyUseHTMLString: true\r\n          });\r\n          return false;\r\n        }\r\n        var data = {\r\n          id: THIS.id,\r\n          contract: THIS.ht_path_up\r\n        };\r\n        vue_Post(\r\n          THIS,\r\n          \"/platform/edit\",\r\n          data,\r\n          () => {\r\n            THIS.$message({\r\n              type: \"success\",\r\n              message: \"上传成功!\",\r\n              dangerouslyUseHTMLString: true\r\n            });\r\n            THIS.ht_show_flag = false;\r\n            THIS.ht_path = \"\";\r\n            THIS.ht_path_up = \"\";\r\n            THIS.img_value = [];\r\n            THIS.getList();\r\n          },\r\n          1,\r\n          1,\r\n          1,\r\n          1\r\n        );\r\n      }\r\n    },\r\n\r\n    create() {\r\n      THIS.$router.push(\"/home/service/serviceOne/serviceEdit\");\r\n    },\r\n\r\n    //PDF改变页数\r\n    previousPage() {\r\n      var p = THIS.pdfPage;\r\n      p = p > 1 ? p - 1 : THIS.pageCount;\r\n      THIS.pdfPage = p;\r\n    },\r\n\r\n    nextPage() {\r\n      var p = THIS.pdfPage;\r\n      p = p < THIS.pageCount ? p + 1 : 1;\r\n      THIS.pdfPage = p;\r\n    },\r\n\r\n    closeViewer() {\r\n      THIS.showViewer = false;\r\n      THIS.previewImages = [];\r\n    }\r\n  },\r\n  mounted() {\r\n    THIS = this;\r\n    THIS.up_imgurl = window.localStorage.host + \"/common/upload\";\r\n    THIS.store.commit(\"setPageText\", \"当前位置：服务商管理 / 自然人信息列表\");\r\n    THIS.getList();\r\n    THIS.userType = window.localStorage.userType;\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.list_header li,\r\n.list_main ol li {\r\n  width: 16%;\r\n}\r\n</style>\r\n"]}]}