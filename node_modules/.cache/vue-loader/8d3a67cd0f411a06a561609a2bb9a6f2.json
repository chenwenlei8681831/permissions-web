{"remainingRequest":"/Users/mac/Desktop/permissions-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/permissions-web/src/views/task/taskEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/permissions-web/src/views/task/taskEdit.vue","mtime":1648622063190},{"path":"/Users/mac/Desktop/permissions-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/permissions-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mac/Desktop/permissions-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/permissions-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nvar THIS;\r\nimport botHeader from '@/views/components/bot-header/bot-header';\r\nimport submitBtn from '@/views/components/form-submit/submit-btn';\r\nexport default {\r\n    components:{\r\n        botHeader,\r\n        submitBtn\r\n    },\r\n    name: '',\r\n    data(){\r\n        return {\r\n            id:'',\r\n            userType:2,\r\n            isBack:true,\r\n            link:'/home/task/taskOne/taskList',\r\n            msg:{},\r\n            ruleForm:{\r\n                name:'',\r\n                mid:'',\r\n                type:'',\r\n                address:'',\r\n                desc:'',\r\n                standard:'',\r\n                cycle:'',\r\n                fee:'',\r\n                pid:'',\r\n                cooperation:'',\r\n                report:'',\r\n                number:'',\r\n                education:'',\r\n            },  \r\n            rules:{\r\n                name:[{ required: true, message: '请输入任务名称', trigger: [] }],\r\n                mid:[{ required: true, message: '请输入发包方', trigger: [] }],\r\n                address:[{ required: true, message: '请输入任务城市', trigger: [] }],\r\n                desc:[{ required: true, message: '请输入任务描述', trigger: [] }],\r\n                type:[{ required: true, message: '请选择用工类型', trigger: [] }],\r\n                standard:[{ required: true, message: '请输入验收标准', trigger: [] }],\r\n                cycle:[{ required: true, message: '请选择结算周期', trigger: [] }],\r\n                fee:[{ required: true, message: '请输入服务费', trigger: [] }],\r\n                pid:[{ required: true, message: '请选择服务商名称', trigger: [] }],\r\n                cooperation:[{ required: true, message: '请选择结算周期', trigger: [] }],\r\n                report:[{ required: true, message: '请选择报名期限', trigger: [] }],\r\n                number:[{ required: true, message: '请输入接单人数', trigger: [] }],\r\n                education:[{ required: true, message: '请选择学历要求', trigger: [] }],\r\n            },\r\n            pidArr:[],\r\n            midArr:[],\r\n            typeArr:[],\r\n            cycleArr:[\r\n                { title:'按单结算',id:1 },\r\n                { title:'按小时结算',id:2 },\r\n                { title:'按月结算',id:3 },\r\n                { title:'按日结算',id:4 }\r\n            ],\r\n            educationArr:[\r\n                { title:'无限制',id:1 },\r\n                { title:'初中以上',id:2 },\r\n                { title:'高中以上',id:3 },\r\n                { title:'大专以上',id:4 },\r\n                { title:'本科以上',id:5 }\r\n            ]\r\n        }\r\n    },\r\n    methods:{\r\n\r\n            submitForm(formName) {\r\n                    THIS.$refs[formName].validate((valid) => {\r\n                        console.log('valid',valid)\r\n                        if (valid) {\r\n                            THIS.submit_from();\r\n                        } else {\r\n                            THIS.$message({\r\n                                    type: 'warning',\r\n                                    message: '请将必填项完善后再提交',\r\n                                    dangerouslyUseHTMLString:true\r\n                                });\r\n                            return false;\r\n                        }\r\n                    });\r\n            },\r\n\r\n            resetForm(formName) {\r\n                    THIS.$refs[formName].resetFields();\r\n            },\r\n\r\n            submit_from(){\r\n                    var data = {\r\n                        name:THIS.ruleForm.name,\r\n                        mid:THIS.ruleForm.mid,\r\n                        type:THIS.ruleForm.type,\r\n                        address:THIS.ruleForm.address,\r\n                        desc:THIS.ruleForm.desc,\r\n                        standard:THIS.ruleForm.standard,\r\n                        cycle:THIS.ruleForm.cycle,\r\n                        fee:THIS.ruleForm.fee,\r\n                        pid:THIS.ruleForm.pid,\r\n                        cooperation_start:THIS.ruleForm.cooperation[0],\r\n                        cooperation_end:THIS.ruleForm.cooperation[1],\r\n                        report_start:THIS.ruleForm.report[0],\r\n                        report_end:THIS.ruleForm.report[1],\r\n                        number:THIS.ruleForm.number,\r\n                        education:THIS.ruleForm.education\r\n                    };\r\n                    var url = '';\r\n                    if(THIS.id){\r\n                        data.id = THIS.id;\r\n                        url = '/task/edit'\r\n                    }else{\r\n                        url = '/task/add';\r\n                    };\r\n                    vue_Post(THIS,url,data,callback,1,1,1,1);\r\n                    function callback(msg){\r\n                        THIS.$message({\r\n                            type: 'success',\r\n                            message: THIS.id?'编辑成功':'创建成功',\r\n                            dangerouslyUseHTMLString:true\r\n                        });\r\n                        THIS.isBack = false;\r\n                        THIS.$router.replace(THIS.link);\r\n                    }; \r\n            },\r\n\r\n            get_detail(){\r\n                var data = {\r\n                    id:THIS.id\r\n                };\r\n                vue_Post(THIS,'/task/get',data,callback,1,1,0,1);\r\n                function callback(msg){\r\n                    msg = msg.info;\r\n                    THIS.ruleForm = {\r\n                        name:msg.name,\r\n                        mid:msg.mid,\r\n                        type:msg.type,\r\n                        address:msg.address,\r\n                        desc:msg.desc,\r\n                        standard:msg.standard,\r\n                        cycle:msg.cycle,\r\n                        fee:msg.fee,\r\n                        pid:msg.pid,\r\n                        cooperation:[msg.cooperation_start,msg.cooperation_end],\r\n                        report:[msg.report_start,msg.report_end],\r\n                        number:msg.number,\r\n                        education:msg.education,\r\n                    };\r\n                    THIS.get_type();\r\n                }\r\n            },\r\n\r\n            //获取服务商\r\n            search_pid(msg){\r\n                var data = {\r\n                    name:msg,\r\n                    size:300\r\n                };\r\n                vue_Post(THIS,'/platform/list',data,callback,0,0,0,0);\r\n                function callback(msg){\r\n                    THIS.pidArr = msg.list.map(item=>{\r\n                        return { title:item.name,id:item.id }\r\n                    });\r\n                }\r\n            },\r\n\r\n            //获取发包方\r\n            search_mid(msg){\r\n                var data = {\r\n                    name:msg,\r\n                    size:300\r\n                };\r\n                vue_Post(THIS,'/merchant/list',data,callback,0,0,0,0);\r\n                function callback(msg){\r\n                    console.log(1000)\r\n                    THIS.midArr = msg.list.map(item=>{\r\n                        return { title:item.m_name,id:item.id }\r\n                    });\r\n                }\r\n            },\r\n\r\n            get_type(){\r\n                var data = {\r\n                    id:THIS.ruleForm.mid\r\n                };\r\n                vue_Post(THIS,'/merchant/getProtocol',data,callback,0,0,0,0);\r\n                function callback(msg){\r\n                    THIS.typeArr = msg;\r\n                    console.log(THIS.typeArr);\r\n                }\r\n            },\r\n\r\n            changeMid(flag){\r\n                if(!flag&&THIS.ruleForm.mid){\r\n                   THIS.get_type();\r\n                };\r\n            },\r\n\r\n    },\r\n    mounted(){\r\n        THIS = this;\r\n        THIS.store.commit('setPageText','任务管理 / 任务编辑');\r\n        THIS.id = THIS.$route.params.id?THIS.$route.params.id:'';\r\n        THIS.userType = window.localStorage.userType;\r\n        if(THIS.id){\r\n            THIS.get_detail();\r\n        }else{\r\n            THIS.get_type();\r\n        };\r\n        THIS.search_pid('');\r\n        THIS.search_mid('');\r\n        \r\n        \r\n    },\r\n    beforeDestroy(){\r\n        THIS.store.commit('setPageText','当前位置：任务管理 / 任务列表');\r\n    },\r\n    beforeRouteLeave(to, from, next){//删除：清除缓存页面缓存  返回：缓存上一页面\r\n        if(!THIS.isBack){\r\n            to.meta.keepAlive = false; \r\n        };\r\n        next();\r\n    },\r\n}\r\n",{"version":3,"sources":["taskEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"taskEdit.vue","sourceRoot":"src/views/task","sourcesContent":["<template>\r\n\r\n\r\n          <div class=\"views h_bottom po_r pad_l_50 pad_r_50 b_s mr_color01\">\r\n                \r\n                <bot-header :link='link'></bot-header>\r\n                <el-form :model=\"ruleForm\" label-position='top' :rules=\"rules\" ref=\"ruleForm\" class=\"views_100ch_2 demo-ruleForm\">\r\n                        <div class=\"views_100ch_2\">\r\n                            <div class=\"from_box\">\r\n                                <div class=\"from_tltle\">基本信息</div>\r\n                                <div class=\"w_100 b_s pad_l_30 pad_r_30 mar_t_30\">\r\n                                    <div class=\"w_100\">\r\n                                        <div class=\"w_100 flex row j_between\">\r\n                                            <el-form-item class=\"w_30\" label=\"任务名称\" prop=\"name\">\r\n                                                <el-input v-model=\"ruleForm.name\" placeholder=\"请输入任务名称\" clearable></el-input>\r\n                                            </el-form-item>\r\n                                            <el-form-item class=\"w_30\" label=\"任务城市\" prop=\"address\">\r\n                                                <el-input v-model=\"ruleForm.address\" placeholder=\"请输入任务城市\" clearable></el-input>\r\n                                            </el-form-item>\r\n                                            <el-form-item class=\"w_30\" v-if=\"userType==1\" label=\"发包方\" prop=\"mid\">\r\n                                                <el-select @visible-change=\"changeMid($event)\" class=\"w_100 d_b_line\" v-model=\"ruleForm.mid\" remote :remote-method='search_mid' clearable filterable  placeholder=\"请选择发包方\">\r\n                                                    <el-option v-for=\"(item,index) in midArr\" :key=\"index\" :label=\"item.title\" :value=\"item.id\"></el-option>\r\n                                                </el-select>\r\n                                            </el-form-item>\r\n                                            <div v-else class=\"w_30\"></div>\r\n                                        </div>\r\n                                        <div class=\"w_100 flex row j_between\">\r\n                                            <el-form-item class=\"w_30\" label=\"用工类型\" prop=\"type\">\r\n                                                <el-select class=\"w_100 d_b_line\" v-model=\"ruleForm.type\" clearable filterable placeholder=\"请选择用工类型\">\r\n                                                    <el-option v-for=\"(item,index) in typeArr\" :key=\"index\" :label=\"item.name\" :value=\"item.id\"></el-option>\r\n                                                </el-select>\r\n                                            </el-form-item>\r\n                                            <el-form-item label=\"任务描述\" prop=\"desc\" class=\"w_30 mar_r_30\">\r\n                                                <el-input type=\"textarea\" :rows=\"4\" v-model=\"ruleForm.desc\" placeholder=\"请输入任务描述\"></el-input>\r\n                                            </el-form-item>\r\n                                            <el-form-item label=\"验收标准\" prop=\"standard\" class=\"w_30\">\r\n                                                <el-input type=\"textarea\" :rows=\"4\" v-model=\"ruleForm.standard\" placeholder=\"请输入验收标准\"></el-input>\r\n                                            </el-form-item>\r\n                                        </div>\r\n                                        <div class=\"w_100 flex row j_between\">\r\n                                            <el-form-item class=\"w_30\" label=\"结算周期\" prop=\"cycle\">\r\n                                                <el-select class=\"w_100 d_b_line\" v-model=\"ruleForm.cycle\" clearable filterable placeholder=\"请选择结算周期\">\r\n                                                    <el-option v-for=\"(item,index) in cycleArr\" :key=\"index\" :label=\"item.title\" :value=\"item.id\"></el-option>\r\n                                                </el-select>\r\n                                            </el-form-item>\r\n                                            <el-form-item class=\"w_30\" label=\"服务费\" prop=\"fee\">\r\n                                                <el-input v-model=\"ruleForm.fee\" placeholder=\"请输入服务费\" oninput=\"value=value.replace(/[^\\d\\.]/g,'')\" clearable></el-input>\r\n                                            </el-form-item>\r\n                                            <el-form-item class=\"w_30\" label=\"学历要求\" prop=\"education\">\r\n                                                <el-select class=\"w_100 d_b_line\" v-model=\"ruleForm.education\" clearable filterable placeholder=\"请选择学历要求\">\r\n                                                    <el-option v-for=\"(item,index) in educationArr\" :key=\"index\" :label=\"item.title\" :value=\"item.id\"></el-option>\r\n                                                </el-select>\r\n                                            </el-form-item>\r\n                                        </div>\r\n                                        <div class=\"w_100 flex row j_between\">\r\n                                            <el-form-item class=\"w_30\" label=\"合作期限\" prop=\"cooperation\">\r\n                                                <el-date-picker\r\n                                                    style='width:100%'\r\n                                                    v-model=\"ruleForm.cooperation\"\r\n                                                    value-format=\"yyyy-MM-dd\"\r\n                                                    type=\"daterange\"\r\n                                                    range-separator=\"至\"\r\n                                                    start-placeholder=\"开始日期\"\r\n                                                    end-placeholder=\"结束日期\">\r\n                                                </el-date-picker>\r\n                                            </el-form-item>\r\n                                            <el-form-item class=\"w_30\" label=\"报名期限\" prop=\"report\">\r\n                                                <el-date-picker\r\n                                                    style='width:100%'\r\n                                                    v-model=\"ruleForm.report\"\r\n                                                    value-format=\"yyyy-MM-dd\"\r\n                                                    type=\"daterange\"\r\n                                                    range-separator=\"至\"\r\n                                                    start-placeholder=\"开始日期\"\r\n                                                    end-placeholder=\"结束日期\">\r\n                                                </el-date-picker>\r\n                                            </el-form-item>\r\n                                            <el-form-item class=\"w_30\" label=\"接单人数\" prop=\"number\">\r\n                                                <el-input v-model=\"ruleForm.number\" oninput=\"value=value.replace(/[^\\d]/g,'')\" placeholder=\"请输入接单人数\" clearable></el-input>\r\n                                            </el-form-item>\r\n                                        </div>\r\n                                        <div v-if=\"userType==1\" class=\"w_100 flex row j_between\">\r\n                                            <el-form-item class=\"w_30\" label=\"服务商\" prop=\"pid\">\r\n                                                <el-select class=\"w_100 d_b_line\" v-model=\"ruleForm.pid\" remote :remote-method='search_pid' clearable filterable  placeholder=\"请选择服务商名称\">\r\n                                                    <el-option v-for=\"(item,index) in pidArr\" :key=\"index\" :label=\"item.title\" :value=\"item.id\"></el-option>\r\n                                                </el-select>\r\n                                            </el-form-item>\r\n                                            <div class=\"w_30\"></div>\r\n                                            <div class=\"w_30\"></div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                </el-form>\r\n                <div class=\"po_b po_bottom bg_fff h_60px w_100\">\r\n                    <submit-btn @submitForm='submitForm' @resetForm='resetForm'></submit-btn>\r\n                </div>\r\n\r\n          </div>\r\n  \r\n</template>\r\n\r\n<script>\r\nvar THIS;\r\nimport botHeader from '@/views/components/bot-header/bot-header';\r\nimport submitBtn from '@/views/components/form-submit/submit-btn';\r\nexport default {\r\n    components:{\r\n        botHeader,\r\n        submitBtn\r\n    },\r\n    name: '',\r\n    data(){\r\n        return {\r\n            id:'',\r\n            userType:2,\r\n            isBack:true,\r\n            link:'/home/task/taskOne/taskList',\r\n            msg:{},\r\n            ruleForm:{\r\n                name:'',\r\n                mid:'',\r\n                type:'',\r\n                address:'',\r\n                desc:'',\r\n                standard:'',\r\n                cycle:'',\r\n                fee:'',\r\n                pid:'',\r\n                cooperation:'',\r\n                report:'',\r\n                number:'',\r\n                education:'',\r\n            },  \r\n            rules:{\r\n                name:[{ required: true, message: '请输入任务名称', trigger: [] }],\r\n                mid:[{ required: true, message: '请输入发包方', trigger: [] }],\r\n                address:[{ required: true, message: '请输入任务城市', trigger: [] }],\r\n                desc:[{ required: true, message: '请输入任务描述', trigger: [] }],\r\n                type:[{ required: true, message: '请选择用工类型', trigger: [] }],\r\n                standard:[{ required: true, message: '请输入验收标准', trigger: [] }],\r\n                cycle:[{ required: true, message: '请选择结算周期', trigger: [] }],\r\n                fee:[{ required: true, message: '请输入服务费', trigger: [] }],\r\n                pid:[{ required: true, message: '请选择服务商名称', trigger: [] }],\r\n                cooperation:[{ required: true, message: '请选择结算周期', trigger: [] }],\r\n                report:[{ required: true, message: '请选择报名期限', trigger: [] }],\r\n                number:[{ required: true, message: '请输入接单人数', trigger: [] }],\r\n                education:[{ required: true, message: '请选择学历要求', trigger: [] }],\r\n            },\r\n            pidArr:[],\r\n            midArr:[],\r\n            typeArr:[],\r\n            cycleArr:[\r\n                { title:'按单结算',id:1 },\r\n                { title:'按小时结算',id:2 },\r\n                { title:'按月结算',id:3 },\r\n                { title:'按日结算',id:4 }\r\n            ],\r\n            educationArr:[\r\n                { title:'无限制',id:1 },\r\n                { title:'初中以上',id:2 },\r\n                { title:'高中以上',id:3 },\r\n                { title:'大专以上',id:4 },\r\n                { title:'本科以上',id:5 }\r\n            ]\r\n        }\r\n    },\r\n    methods:{\r\n\r\n            submitForm(formName) {\r\n                    THIS.$refs[formName].validate((valid) => {\r\n                        console.log('valid',valid)\r\n                        if (valid) {\r\n                            THIS.submit_from();\r\n                        } else {\r\n                            THIS.$message({\r\n                                    type: 'warning',\r\n                                    message: '请将必填项完善后再提交',\r\n                                    dangerouslyUseHTMLString:true\r\n                                });\r\n                            return false;\r\n                        }\r\n                    });\r\n            },\r\n\r\n            resetForm(formName) {\r\n                    THIS.$refs[formName].resetFields();\r\n            },\r\n\r\n            submit_from(){\r\n                    var data = {\r\n                        name:THIS.ruleForm.name,\r\n                        mid:THIS.ruleForm.mid,\r\n                        type:THIS.ruleForm.type,\r\n                        address:THIS.ruleForm.address,\r\n                        desc:THIS.ruleForm.desc,\r\n                        standard:THIS.ruleForm.standard,\r\n                        cycle:THIS.ruleForm.cycle,\r\n                        fee:THIS.ruleForm.fee,\r\n                        pid:THIS.ruleForm.pid,\r\n                        cooperation_start:THIS.ruleForm.cooperation[0],\r\n                        cooperation_end:THIS.ruleForm.cooperation[1],\r\n                        report_start:THIS.ruleForm.report[0],\r\n                        report_end:THIS.ruleForm.report[1],\r\n                        number:THIS.ruleForm.number,\r\n                        education:THIS.ruleForm.education\r\n                    };\r\n                    var url = '';\r\n                    if(THIS.id){\r\n                        data.id = THIS.id;\r\n                        url = '/task/edit'\r\n                    }else{\r\n                        url = '/task/add';\r\n                    };\r\n                    vue_Post(THIS,url,data,callback,1,1,1,1);\r\n                    function callback(msg){\r\n                        THIS.$message({\r\n                            type: 'success',\r\n                            message: THIS.id?'编辑成功':'创建成功',\r\n                            dangerouslyUseHTMLString:true\r\n                        });\r\n                        THIS.isBack = false;\r\n                        THIS.$router.replace(THIS.link);\r\n                    }; \r\n            },\r\n\r\n            get_detail(){\r\n                var data = {\r\n                    id:THIS.id\r\n                };\r\n                vue_Post(THIS,'/task/get',data,callback,1,1,0,1);\r\n                function callback(msg){\r\n                    msg = msg.info;\r\n                    THIS.ruleForm = {\r\n                        name:msg.name,\r\n                        mid:msg.mid,\r\n                        type:msg.type,\r\n                        address:msg.address,\r\n                        desc:msg.desc,\r\n                        standard:msg.standard,\r\n                        cycle:msg.cycle,\r\n                        fee:msg.fee,\r\n                        pid:msg.pid,\r\n                        cooperation:[msg.cooperation_start,msg.cooperation_end],\r\n                        report:[msg.report_start,msg.report_end],\r\n                        number:msg.number,\r\n                        education:msg.education,\r\n                    };\r\n                    THIS.get_type();\r\n                }\r\n            },\r\n\r\n            //获取服务商\r\n            search_pid(msg){\r\n                var data = {\r\n                    name:msg,\r\n                    size:300\r\n                };\r\n                vue_Post(THIS,'/platform/list',data,callback,0,0,0,0);\r\n                function callback(msg){\r\n                    THIS.pidArr = msg.list.map(item=>{\r\n                        return { title:item.name,id:item.id }\r\n                    });\r\n                }\r\n            },\r\n\r\n            //获取发包方\r\n            search_mid(msg){\r\n                var data = {\r\n                    name:msg,\r\n                    size:300\r\n                };\r\n                vue_Post(THIS,'/merchant/list',data,callback,0,0,0,0);\r\n                function callback(msg){\r\n                    console.log(1000)\r\n                    THIS.midArr = msg.list.map(item=>{\r\n                        return { title:item.m_name,id:item.id }\r\n                    });\r\n                }\r\n            },\r\n\r\n            get_type(){\r\n                var data = {\r\n                    id:THIS.ruleForm.mid\r\n                };\r\n                vue_Post(THIS,'/merchant/getProtocol',data,callback,0,0,0,0);\r\n                function callback(msg){\r\n                    THIS.typeArr = msg;\r\n                    console.log(THIS.typeArr);\r\n                }\r\n            },\r\n\r\n            changeMid(flag){\r\n                if(!flag&&THIS.ruleForm.mid){\r\n                   THIS.get_type();\r\n                };\r\n            },\r\n\r\n    },\r\n    mounted(){\r\n        THIS = this;\r\n        THIS.store.commit('setPageText','任务管理 / 任务编辑');\r\n        THIS.id = THIS.$route.params.id?THIS.$route.params.id:'';\r\n        THIS.userType = window.localStorage.userType;\r\n        if(THIS.id){\r\n            THIS.get_detail();\r\n        }else{\r\n            THIS.get_type();\r\n        };\r\n        THIS.search_pid('');\r\n        THIS.search_mid('');\r\n        \r\n        \r\n    },\r\n    beforeDestroy(){\r\n        THIS.store.commit('setPageText','当前位置：任务管理 / 任务列表');\r\n    },\r\n    beforeRouteLeave(to, from, next){//删除：清除缓存页面缓存  返回：缓存上一页面\r\n        if(!THIS.isBack){\r\n            to.meta.keepAlive = false; \r\n        };\r\n        next();\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n   \r\n</style>\r\n"]}]}