{"remainingRequest":"/Users/mac/Desktop/permissions-web/node_modules/babel-loader/lib/index.js!/Users/mac/Desktop/permissions-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Desktop/permissions-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/permissions-web/src/views/publicity/kaoqinList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/permissions-web/src/views/publicity/kaoqinList.vue","mtime":1648622063224},{"path":"/Users/mac/Desktop/permissions-web/babel.config.js","mtime":1647345364000},{"path":"/Users/mac/Desktop/permissions-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/permissions-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mac/Desktop/permissions-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/permissions-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar THIS;\nimport botHeader from \"@/views/components/bot-header/bot-header\";\nexport default {\n  components: {\n    botHeader: botHeader\n  },\n  name: \"\",\n  data: function data() {\n    return {\n      userType: \"\",\n      seleteIndex: 0,\n      commonhost: window.localStorage.host,\n      up_host: window.localStorage.host,\n      token: window.localStorage.flexible_manage_token,\n      month: \"\",\n      page: 1,\n      count: 10,\n      total: 0,\n      list: [],\n      year: \"\",\n      fileList: [],\n      show_flag: false,\n      path: \"\",\n      service: \"\",\n      serviceArr: []\n    };\n  },\n  methods: {\n    sub: function sub(type) {\n      THIS.page = 1;\n\n      if (type == 2) {\n        THIS.year = \"\";\n      }\n\n      THIS.getList();\n    },\n    getList: function getList() {\n      var data = {\n        token: window.localStorage.rl_company_token,\n        page: THIS.page,\n        count: THIS.count\n      };\n\n      if (THIS.year) {\n        data.year = THIS.year;\n      }\n\n      vue_Post(THIS, \"/attendance/list\", data, callback, 0, 0, 0, 0);\n\n      function callback(msg) {\n        THIS.list = msg.list;\n        THIS.total = msg.count;\n      }\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.page = val;\n      this.getList();\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.count = val;\n      this.page = 1;\n      this.getList();\n    },\n    download: function download(link) {\n      if (link) {\n        window.location.href = link;\n      }\n    },\n    up_load: function up_load() {\n      THIS.show_flag = true;\n    },\n    //下载模板\n    dowm_load: function dowm_load() {\n      var bb = window.localStorage.host + \"Report.TemplateDown&token=\" + window.localStorage.rl_company_token + \"&type=1\" + \"&sign=\" + sign({}).sign + \"&timestamp=\" + sign({}).timestamp;\n      window.location.href = bb;\n    },\n    close02: function close02() {\n      THIS.month = \"\";\n      THIS.fileList = [];\n      THIS.show_flag = false;\n    },\n    submitUpload: function submitUpload() {\n      if (!THIS.month) {\n        THIS.$message({\n          type: \"error\",\n          message: \"请先选择日期!\",\n          dangerouslyUseHTMLString: true\n        });\n        return false;\n      }\n\n      if (!THIS.service && THIS.userType == 1) {\n        THIS.$message({\n          type: \"error\",\n          message: \"请先选择服务商!\",\n          dangerouslyUseHTMLString: true\n        });\n        return false;\n      }\n\n      THIS.submitFunc();\n    },\n    submitFunc: function submitFunc() {\n      var data = sign({\n        date: THIS.month,\n        file_url: THIS.path,\n        mid: THIS.service\n      });\n      vue_Post(THIS, \"/attendance/add\", data, callback, 1, 1, 1, 0);\n\n      function callback(msg) {\n        THIS.v_close();\n        THIS.getList();\n      }\n    },\n    v_close: function v_close() {\n      THIS.month = \"\";\n      THIS.fileList = [];\n      THIS.show_flag = false;\n      THIS.path = \"\";\n      THIS.service = \"\";\n    },\n    upSuccess: function upSuccess(event, file, fileList) {\n      if (file.response.code == 200) {\n        THIS.path = file.response.data.path[0];\n      } else {\n        THIS.upError();\n      }\n    },\n    upError: function upError(msg) {\n      THIS.$message({\n        type: \"error\",\n        message: \"上传失败!\",\n        dangerouslyUseHTMLString: true\n      });\n      THIS.fileList = [];\n    },\n    up_serve: function up_serve(path) {\n      var year = THIS.month ? THIS.month.split(\"-\")[0] : \"\";\n      var month = THIS.month ? THIS.month.split(\"-\")[1] : \"\";\n      var data = sign({\n        token: window.localStorage.rl_company_token ? window.localStorage.rl_company_token : \"\",\n        year: year,\n        month: month,\n        type: 1,\n        path: path\n      });\n      vue_Post(THIS, \"Report.Add\", data, callback, 0, 0, 0, 0);\n\n      function callback(msg) {\n        THIS.close02();\n        THIS.getList();\n      }\n    },\n    get_service: function get_service() {\n      var data = sign({\n        page: 1,\n        size: 9999\n      });\n      vue_Post(THIS, \"/merchant/list\", data, callback, 0, 0, 0, 0);\n\n      function callback(msg) {\n        THIS.serviceArr = msg.list.map(function (item) {\n          return {\n            name: item.m_name,\n            id: item.id\n          };\n        });\n      }\n    }\n  },\n  mounted: function mounted() {\n    THIS = this;\n    THIS.data = sign({\n      token: window.localStorage.rl_company_token ? window.localStorage.rl_company_token : \"\"\n    });\n    THIS.userType = window.localStorage.userType;\n    THIS.year = new Date().getFullYear().toString();\n    THIS.store.commit(\"setPageText\", \"当前位置：公示 / 考勤表公示\");\n    THIS.getList();\n    THIS.get_service();\n  }\n};",{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+NA;AACA;AACA;AACAA;AACAC;AADA,GADA;AAIAC,UAJA;AAKAC,MALA,kBAKA;AACA;AACAC,kBADA;AAEAC,oBAFA;AAGAC,0CAHA;AAIAC,uCAJA;AAKAC,sDALA;AAMAC,eANA;AAOAC,aAPA;AAQAC,eARA;AASAC,cATA;AAUAC,cAVA;AAWAC,cAXA;AAYAC,kBAZA;AAaAC,sBAbA;AAcAC,cAdA;AAeAC,iBAfA;AAgBAC;AAhBA;AAkBA,GAxBA;AAyBAC;AACAC,OADA,eACAC,IADA,EACA;AACAC;;AACA;AACAA;AACA;;AACAA;AACA,KAPA;AASAC,WATA,qBASA;AACA;AACAhB,mDADA;AAEAE,uBAFA;AAGAC;AAHA;;AAKA;AACAR;AACA;;AACAsB;;AACA;AACAF;AACAA;AACA;AACA,KAvBA;AAyBAG,uBAzBA,+BAyBAC,GAzBA,EAyBA;AACA;AACA;AACA,KA5BA;AA8BAC,oBA9BA,4BA8BAD,GA9BA,EA8BA;AACA;AACA;AACA;AACA,KAlCA;AAoCAE,YApCA,oBAoCAC,IApCA,EAoCA;AACA;AACAC;AACA;AACA,KAxCA;AA0CAC,WA1CA,qBA0CA;AACAT;AACA,KA5CA;AA8CA;AACAU,aA/CA,uBA+CA;AACA,eACAF,2BACA,4BADA,GAEAA,oCAFA,GAGA,SAHA,GAIA,QAJA,GAKAG,aALA,GAMA,aANA,GAOAA,kBARA;AASAH;AACA,KA1DA;AA4DAI,WA5DA,qBA4DA;AACAZ;AACAA;AACAA;AACA,KAhEA;AAkEAa,gBAlEA,0BAkEA;AACA;AACAb;AACAD,uBADA;AAEAe,4BAFA;AAGAC;AAHA;AAKA;AACA;;AACA;AACAf;AACAD,uBADA;AAEAe,6BAFA;AAGAC;AAHA;AAKA;AACA;;AACAf;AACA,KApFA;AAsFAgB,cAtFA,wBAsFA;AACA;AACAC,wBADA;AAEAC,2BAFA;AAGAC;AAHA;AAKAjB;;AACA;AACAF;AACAA;AACA;AACA,KAjGA;AAmGAoB,WAnGA,qBAmGA;AACApB;AACAA;AACAA;AACAA;AACAA;AACA,KAzGA;AA2GAqB,aA3GA,qBA2GAC,KA3GA,EA2GAC,IA3GA,EA2GA/B,QA3GA,EA2GA;AACA;AACAQ;AACA,OAFA,MAEA;AACAA;AACA;AACA,KAjHA;AAmHAwB,WAnHA,mBAmHAC,GAnHA,EAmHA;AACAzB;AACAD,qBADA;AAEAe,wBAFA;AAGAC;AAHA;AAKAf;AACA,KA1HA;AA4HA0B,YA5HA,oBA4HAhC,IA5HA,EA4HA;AACA;AACA;AACA;AACAT,sDACAuB,oCADA,GAEA,EAHA;AAIAjB,kBAJA;AAKAL,oBALA;AAMAa,eANA;AAOAL;AAPA;AASAQ;;AACA;AACAF;AACAA;AACA;AACA,KA7IA;AA+IA2B,eA/IA,yBA+IA;AACA;AACAxC,eADA;AAEAyC;AAFA;AAIA1B;;AACA;AACAF;AACA;AAAArB;AAAAkD;AAAA;AACA,SAFA;AAGA;AACA;AA1JA,GAzBA;AAqLAC,SArLA,qBAqLA;AACA9B;AACAA;AACAf,oDACAuB,oCADA,GAEA;AAHA;AAKAR;AACAA;AACAA;AACAA;AACAA;AACA;AAjMA","names":["components","botHeader","name","data","userType","seleteIndex","commonhost","up_host","token","month","page","count","total","list","year","fileList","show_flag","path","service","serviceArr","methods","sub","type","THIS","getList","vue_Post","handleCurrentChange","val","handleSizeChange","download","link","window","up_load","dowm_load","sign","close02","submitUpload","message","dangerouslyUseHTMLString","submitFunc","date","file_url","mid","v_close","upSuccess","event","file","upError","msg","up_serve","get_service","size","id","mounted"],"sourceRoot":"src/views/publicity","sources":["kaoqinList.vue"],"sourcesContent":["<template>\r\n  <div class=\"views b_s mr_color01 h_bottom\">\r\n    <div class=\"bg_fff\">\r\n      <bot-header></bot-header>\r\n      <div class=\"views_100ch_1\">\r\n        <!--输入框、下拉筛选-->\r\n        <div class=\"flex row header_item h_60px b_s pad_r_30 pad_l_30\">\r\n          <div class=\"flex_1 w_25 flex row b_s h_100\">\r\n            <span class=\"font12\">选择年份：</span>\r\n            <el-date-picker\r\n              class=\"flex_1\"\r\n              v-model=\"year\"\r\n              size=\"mini\"\r\n              value-format=\"yyyy\"\r\n              placeholder=\"选择年份\"\r\n              type=\"year\"\r\n            ></el-date-picker>\r\n          </div>\r\n          <div class=\"h_100 mar_l_30\">\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"sub(1)\">查询</el-button>\r\n            <el-button size=\"mini\" @click=\"sub(2)\">重置</el-button>\r\n          </div>\r\n          <div class=\"flex_1 w_25\"></div>\r\n          <div class=\"flex_1 w_25\"></div>\r\n        </div>\r\n        <!--下载、上传-->\r\n        <div class=\"w_100 header_item h_60px b_s font14\">\r\n          <span\r\n            v-if=\"false\"\r\n            @click=\"dowm_load\"\r\n            class=\"f_l search_btn search_btn02 3_btn b_s pad_r_20 pointer all_line\"\r\n          >下载考勤表</span>\r\n          <span\r\n            @click=\"up_load\"\r\n            class=\"f_l search_btn search_btn02 3_btn b_s pad_r_20 pointer all_line\"\r\n          >上传考勤表</span>\r\n          <div class=\"clearfix\"></div>\r\n        </div>\r\n        <el-table\r\n          :data=\"list\"\r\n          style=\"width: 100%\"\r\n          height=\"544\"\r\n          stripe\r\n          :header-cell-style=\"{background:'#f5f5f5'}\"\r\n        >\r\n          <el-table-column prop=\"name\" label=\"商户名称\" min-width=\"100\">\r\n            <template v-slot=\"{row}\">{{row.name ? row.name: '--'}}</template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"1\" label=\"1月份\" min-width=\"80\">\r\n            <template v-slot=\"{row}\">\r\n              <el-button\r\n                type=\"text\"\r\n                :class=\"row[1]?'':'col03'\"\r\n                @click=\"download(row[1])\"\r\n              >{{row[1]?'下载':'未上传'}}</el-button>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"2\" label=\"2月份\" min-width=\"80\">\r\n            <template v-slot=\"{row}\">\r\n              <el-button\r\n                type=\"text\"\r\n                :class=\"row[2]?'':'col03'\"\r\n                @click=\"download(row[2])\"\r\n              >{{row[2]?'下载':'未上传'}}</el-button>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"3\" label=\"3月份\" min-width=\"80\">\r\n            <template v-slot=\"{row}\">\r\n              <el-button\r\n                type=\"text\"\r\n                :class=\"row[3]?'':'col03'\"\r\n                @click=\"download(row[3])\"\r\n              >{{row[3]?'下载':'未上传'}}</el-button>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"4\" label=\"4月份\" min-width=\"80\">\r\n            <template v-slot=\"{row}\">\r\n              <el-button\r\n                type=\"text\"\r\n                :class=\"row[4]?'':'col03'\"\r\n                @click=\"download(row[4])\"\r\n              >{{row[4]?'下载':'未上传'}}</el-button>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"5\" label=\"5月份\" min-width=\"80\">\r\n            <template v-slot=\"{row}\">\r\n              <el-button\r\n                type=\"text\"\r\n                :class=\"row[5]?'':'col03'\"\r\n                @click=\"download(row[5])\"\r\n              >{{row[5]?'下载':'未上传'}}</el-button>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"6\" label=\"6月份\" min-width=\"80\">\r\n            <template v-slot=\"{row}\">\r\n              <el-button\r\n                type=\"text\"\r\n                :class=\"row[6]?'':'col03'\"\r\n                @click=\"download(row[6])\"\r\n              >{{row[6]?'下载':'未上传'}}</el-button>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"7\" label=\"7月份\" min-width=\"80\">\r\n            <template v-slot=\"{row}\">\r\n              <el-button\r\n                type=\"text\"\r\n                :class=\"row[7]?'':'col03'\"\r\n                @click=\"download(row[7])\"\r\n              >{{row[7]?'下载':'未上传'}}</el-button>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"8\" label=\"8月份\" min-width=\"80\">\r\n            <template v-slot=\"{row}\">\r\n              <el-button\r\n                type=\"text\"\r\n                :class=\"row[8]?'':'col03'\"\r\n                @click=\"download(row[8])\"\r\n              >{{row[8]?'下载':'未上传'}}</el-button>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"9\" label=\"9月份\" min-width=\"80\">\r\n            <template v-slot=\"{row}\">\r\n              <el-button\r\n                type=\"text\"\r\n                :class=\"row[9]?'':'col03'\"\r\n                @click=\"download(row[9])\"\r\n              >{{row[9]?'下载':'未上传'}}</el-button>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"10\" label=\"10月份\" min-width=\"80\">\r\n            <template v-slot=\"{row}\">\r\n              <el-button\r\n                type=\"text\"\r\n                :class=\"row[10]?'':'col03'\"\r\n                @click=\"download(row[10])\"\r\n              >{{row[10]?'下载':'未上传'}}</el-button>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"11\" label=\"11月份\" min-width=\"80\">\r\n            <template v-slot=\"{row}\">\r\n              <el-button\r\n                type=\"text\"\r\n                :class=\"row[11]?'':'col03'\"\r\n                @click=\"download(row[11])\"\r\n              >{{row[11]?'下载':'未上传'}}</el-button>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"12\" label=\"12月份\" min-width=\"80\">\r\n            <template v-slot=\"{row}\">\r\n              <el-button\r\n                type=\"text\"\r\n                :class=\"row[12]?'':'col03'\"\r\n                @click=\"download(row[12])\"\r\n              >{{row[12]?'下载':'未上传'}}</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <div class=\"page_footer b_s w_100 h_60px\">\r\n          <el-pagination\r\n            class=\"f_r\"\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"page\"\r\n            :page-sizes=\"[10, 20, 30, 40]\"\r\n            :page-size=\"count\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"total\"\r\n          ></el-pagination>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--上传模板-->\r\n    <el-dialog\r\n      title=\"上传考勤表(支持:.xls,.xlsx格式文件)\"\r\n      :before-close=\"v_close\"\r\n      :visible.sync=\"show_flag\"\r\n      :closeOnClickModal=\"false\"\r\n      width=\"400px\"\r\n    >\r\n      <div class=\"flex_1 w_100 flex col b_s h_100 mar_b_20\">\r\n        <p class=\"mar_b_10 font14\">\r\n          <span style=\"color:red;\">*</span>请选择考勤表时间\r\n        </p>\r\n        <el-date-picker\r\n          style=\"width:100%\"\r\n          v-model=\"month\"\r\n          value-format=\"yyyy-MM\"\r\n          placeholder=\"选择年月\"\r\n          type=\"month\"\r\n        ></el-date-picker>\r\n      </div>\r\n      <div v-if=\"userType==1\" class=\"flex_1 w_100 flex col b_s h_100 mar_b_30\">\r\n        <p class=\"mar_b_10 font14\">\r\n          <span style=\"color:red;\">*</span>请选择商户\r\n        </p>\r\n        <el-select class=\"flex_1\" v-model=\"service\" filterable clearable placeholder=\"请选择商户\">\r\n          <el-option\r\n            v-for=\"(item,index) in serviceArr\"\r\n            :key=\"index\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\"\r\n          ></el-option>\r\n        </el-select>\r\n      </div>\r\n      <el-upload\r\n        class=\"upload-demo\"\r\n        accept=\".xls, .xlsx\"\r\n        :headers=\"{token:token}\"\r\n        :action=\"commonhost+'/common/upload'\"\r\n        :on-success=\"upSuccess\"\r\n        :on-error=\"upError\"\r\n        :file-list=\"fileList\"\r\n        :limit=\"1\"\r\n        name=\"file\"\r\n      >\r\n        <el-button slot=\"trigger\" size=\"small\" type=\"primary\">选取文件</el-button>\r\n        <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"success\" @click=\"submitUpload\">确定上传</el-button>\r\n      </el-upload>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nvar THIS;\r\nimport botHeader from \"@/views/components/bot-header/bot-header\";\r\nexport default {\r\n  components: {\r\n    botHeader\r\n  },\r\n  name: \"\",\r\n  data() {\r\n    return {\r\n      userType: \"\",\r\n      seleteIndex: 0,\r\n      commonhost: window.localStorage.host,\r\n      up_host: window.localStorage.host,\r\n      token: window.localStorage.flexible_manage_token,\r\n      month: \"\",\r\n      page: 1,\r\n      count: 10,\r\n      total: 0,\r\n      list: [],\r\n      year: \"\",\r\n      fileList: [],\r\n      show_flag: false,\r\n      path: \"\",\r\n      service: \"\",\r\n      serviceArr: []\r\n    };\r\n  },\r\n  methods: {\r\n    sub(type) {\r\n      THIS.page = 1;\r\n      if (type == 2) {\r\n        THIS.year = \"\";\r\n      }\r\n      THIS.getList();\r\n    },\r\n\r\n    getList() {\r\n      var data = {\r\n        token: window.localStorage.rl_company_token,\r\n        page: THIS.page,\r\n        count: THIS.count\r\n      };\r\n      if (THIS.year) {\r\n        data.year = THIS.year;\r\n      }\r\n      vue_Post(THIS, \"/attendance/list\", data, callback, 0, 0, 0, 0);\r\n      function callback(msg) {\r\n        THIS.list = msg.list;\r\n        THIS.total = msg.count;\r\n      }\r\n    },\r\n\r\n    handleCurrentChange(val) {\r\n      this.page = val;\r\n      this.getList();\r\n    },\r\n\r\n    handleSizeChange(val) {\r\n      this.count = val;\r\n      this.page = 1;\r\n      this.getList();\r\n    },\r\n\r\n    download(link) {\r\n      if (link) {\r\n        window.location.href = link;\r\n      }\r\n    },\r\n\r\n    up_load() {\r\n      THIS.show_flag = true;\r\n    },\r\n\r\n    //下载模板\r\n    dowm_load() {\r\n      var bb =\r\n        window.localStorage.host +\r\n        \"Report.TemplateDown&token=\" +\r\n        window.localStorage.rl_company_token +\r\n        \"&type=1\" +\r\n        \"&sign=\" +\r\n        sign({}).sign +\r\n        \"&timestamp=\" +\r\n        sign({}).timestamp;\r\n      window.location.href = bb;\r\n    },\r\n\r\n    close02() {\r\n      THIS.month = \"\";\r\n      THIS.fileList = [];\r\n      THIS.show_flag = false;\r\n    },\r\n\r\n    submitUpload() {\r\n      if (!THIS.month) {\r\n        THIS.$message({\r\n          type: \"error\",\r\n          message: \"请先选择日期!\",\r\n          dangerouslyUseHTMLString: true\r\n        });\r\n        return false;\r\n      }\r\n      if (!THIS.service && THIS.userType == 1) {\r\n        THIS.$message({\r\n          type: \"error\",\r\n          message: \"请先选择服务商!\",\r\n          dangerouslyUseHTMLString: true\r\n        });\r\n        return false;\r\n      }\r\n      THIS.submitFunc();\r\n    },\r\n\r\n    submitFunc() {\r\n      var data = sign({\r\n        date: THIS.month,\r\n        file_url: THIS.path,\r\n        mid: THIS.service\r\n      });\r\n      vue_Post(THIS, \"/attendance/add\", data, callback, 1, 1, 1, 0);\r\n      function callback(msg) {\r\n        THIS.v_close();\r\n        THIS.getList();\r\n      }\r\n    },\r\n\r\n    v_close() {\r\n      THIS.month = \"\";\r\n      THIS.fileList = [];\r\n      THIS.show_flag = false;\r\n      THIS.path = \"\";\r\n      THIS.service = \"\";\r\n    },\r\n\r\n    upSuccess(event, file, fileList) {\r\n      if (file.response.code == 200) {\r\n        THIS.path = file.response.data.path[0];\r\n      } else {\r\n        THIS.upError();\r\n      }\r\n    },\r\n\r\n    upError(msg) {\r\n      THIS.$message({\r\n        type: \"error\",\r\n        message: \"上传失败!\",\r\n        dangerouslyUseHTMLString: true\r\n      });\r\n      THIS.fileList = [];\r\n    },\r\n\r\n    up_serve(path) {\r\n      var year = THIS.month ? THIS.month.split(\"-\")[0] : \"\";\r\n      var month = THIS.month ? THIS.month.split(\"-\")[1] : \"\";\r\n      var data = sign({\r\n        token: window.localStorage.rl_company_token\r\n          ? window.localStorage.rl_company_token\r\n          : \"\",\r\n        year: year,\r\n        month: month,\r\n        type: 1,\r\n        path: path\r\n      });\r\n      vue_Post(THIS, \"Report.Add\", data, callback, 0, 0, 0, 0);\r\n      function callback(msg) {\r\n        THIS.close02();\r\n        THIS.getList();\r\n      }\r\n    },\r\n\r\n    get_service() {\r\n      var data = sign({\r\n        page: 1,\r\n        size: 9999\r\n      });\r\n      vue_Post(THIS, \"/merchant/list\", data, callback, 0, 0, 0, 0);\r\n      function callback(msg) {\r\n        THIS.serviceArr = msg.list.map(item => {\r\n          return { name: item.m_name, id: item.id };\r\n        });\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    THIS = this;\r\n    THIS.data = sign({\r\n      token: window.localStorage.rl_company_token\r\n        ? window.localStorage.rl_company_token\r\n        : \"\"\r\n    });\r\n    THIS.userType = window.localStorage.userType;\r\n    THIS.year = new Date().getFullYear().toString();\r\n    THIS.store.commit(\"setPageText\", \"当前位置：公示 / 考勤表公示\");\r\n    THIS.getList();\r\n    THIS.get_service();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.list_header,\r\n.list_main ol,\r\n.list_main > li {\r\n  height: 70px;\r\n}\r\n.el-input__inner {\r\n  padding-left: 15px !important;\r\n}\r\n.v_title {\r\n  height: 40px;\r\n  line-height: 40px;\r\n}\r\n.h_70px {\r\n  height: 70px;\r\n  line-height: 70px;\r\n}\r\n</style>\r\n"]}]}